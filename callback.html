<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>cherry â€¢ logging in</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
    <div class="discord-login-container">
        <div class="discord-login-card">
            <img src="bot-avatar.jpg" alt="Cherry Bot Logo" class="discord-logo">
            <h2>Logging you in...</h2>
            <p>Please wait while we complete your login.</p>
            <div class="loading-spinner"></div>
            <p id="debug-info" style="margin-top: 20px; font-size: 12px; color: #666;"></p>
        </div>
    </div>

    <script>
        function debugLog(message) {
            console.log(message);
            document.getElementById('debug-info').textContent = message;
        }

        // Get the code from URL
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        
        debugLog('Checking for auth code...');
        
        if (code) {
            debugLog('Auth code found: ' + code.substring(0, 10) + '...');
            // Store the auth code temporarily
            sessionStorage.setItem('discord_auth_code', code);
            debugLog('Auth code stored in session storage');
            
            // Add a small delay to show the debug message
            setTimeout(() => {
                debugLog('Redirecting to dashboard...');
                window.location.href = 'dashboard.html';
            }, 1000);
        } else {
            debugLog('No auth code found, redirecting to login...');
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 1000);
        }
    </script>
</body>
</html> 